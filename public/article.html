<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Artículo</title>
    <link rel="stylesheet" href="/apple-style.css"/>
  </head>
  <body>
    <div id="root" class="reading-container fade-in" style="max-width: 880px; margin: 40px auto;">
      <a href="/zero" class="back-link">← Volver</a>
      <h1 id="title" class="main-doc-title" style="margin-top: 16px;">Artículo</h1>
      <div id="content" class="md" style="margin-top: 16px;"></div>
    </div>
    <script>
      (async function(){
        try {
          const m = location.pathname.match(/\/article\/(\w{24})/);
          if (!m) return;
          const r = await fetch('/zero-api/article/' + m[1]);
          const data = await r.json();
          if (!r.ok) throw new Error(data.error || 'not_found');
          document.getElementById('title').textContent = data.title || 'Artículo';
          const content = String(data.content || '');
          // Simple markdown fallback: show pre if marked unavailable
          const render = (md) => md
            .replace(/^###\s+(.+)$/gm, '<h3>$1</h3>')
            .replace(/^##\s+(.+)$/gm, '<h2>$1</h2>')
            .replace(/^#\s+(.+)$/gm, '<h1>$1</h1>')
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/\*(.*?)\*/g, '<em>$1</em>')
            .replace(/`([^`]+)`/g, '<code>$1</code>')
            .replace(/\n/g, '<br/>');
          document.getElementById('content').innerHTML = render(content);
        } catch(e) {
          document.getElementById('content').innerHTML = '<pre>' + (e.message || String(e)) + '</pre>';
        }
      })();
    </script>
  </body>
</html>
